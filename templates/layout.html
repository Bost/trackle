
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

    <title>Shifty Layout Demo</title>

    <!-- bring in the OpenLayers javascript library
         (here we bring it from the remote site, but you could
         easily serve up this javascript yourself) -->
    <script type="text/javascript" src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <!-- bring in the OpenStreetMap OpenLayers layers.
         Using this hosted file will make sure we are kept up
         to date with any necessary changes -->
    <script type="text/javascript" src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <link rel="stylesheet" href="css/ui-darkness/jquery-ui-1.8.23.custom.css">
    <style type="text/css">
    /**
     *    Basic Layout Theme
     *
     *    This theme uses the default layout class-names for all classes
     *    Add any 'custom class-names', from options: paneClass, resizerClass, togglerClass
     */

     .separator {
         height: 20px;
     }
    .ui-layout-pane-west ,
    .ui-layout-pane-center .ui-layout-pane { /* all 'inner panes' */
        border: 1px solid #BBB;
        padding: 5px;
        overflow: auto;
    }
    .ui-layout-resizer { /* all 'resizer-bars' */
        background: #DDD;
    }
    .ui-layout-toggler { /* all 'toggler-buttons' */
        background: #AAA;
    }

/*
    #pane4-closed ,
    .ui-layout-east                        { background:    #00CB6D; }
    .ui-layout-center .ui-layout-north    { background:    #00B4BA; }
    .ui-layout-center .ui-layout-south    { background:    #008EFF; }
    .ui-layout-center .ui-layout-center    { background:    #90C7FF; }
*/
    #pane4-closed {
        position:    absolute;
        top:         0;
        left:        0;
        width:       auto;
        height:      auto;
        padding:     5px 10px;
        text-align:  center;
        border:      1px solid #999;
    }

    #pane3-buttons {
        position:    absolute;
        top:         0;
        right:       0;
        width:       auto;
        height:      auto;
        padding:     5px 10px;
        text-align:  center;
        border:      1px solid #999;
    }

    /**
     *    ALL CSS below is only for cosmetic and demo purposes
     *    Nothing here affects the appearance of the layout
     */
    body {
        font-family:    Arial, sans-serif;
        font-size:      1em;
        /*background:   #999;*/
    }
    p {
        margin: 1em 0;
    }

    </style>

    <script type="text/javascript" src="js/jquery-latest.js"></script>
    <script type="text/javascript" src="js/jquery-ui-latest.js"></script>
    <script type="text/javascript" src="js/jquery.layout-latest.js"></script>

    <script type="text/javascript" src="js/complex.js"></script>

    <script type="text/javascript">

    var outerLayout, innerLayout;

    $(document).ready(function () {

        $("#pane4-closed").hide();  // initialy - the button 'close panel4' is hidden

        outerLayout = $('body').layout({
            // using 'sub-key' option format here
            west: {
                 size:               320
                ,resizable:          true
                ,togglerLength_open: 0
                ,spacing_open:       6 /* resize bar width */
                ,initHidden:         false /* show th panel4 in the begining */
                ,onhide_end:         function () { $("#pane4-closed").slideDown(); }
                ,onshow_start:       function () { $("#pane4-closed").hide(); }
            },

            center: {
                onresize:        function () { if (innerLayout) innerLayout.resizeAll(); }
            }
        });

        innerLayout = $('body > .ui-layout-center').layout({
             minSize:  50
            ,closable: false
        });

    });

        function go(lon, lat) {
        $('#map').html('');

        var urls = new Array();
        $(".cbox:checked").each(function(){
            urls.push("/gpxtrack/"+$(this).attr('id'));
        });
        init(1, lon, lat, 16, urls);
    }

    </script>

    <script>
        $(function() {
            $( "#check" ).button();
            $( "#format" ).buttonset();
        });
    </script>
    <style>
        #format { margin-top: 2em; }
    </style>

</head>
<body>
<div class="ui-layout-west">
    <!--pane #4-->
    <div><button onclick="outerLayout.hide('west', true)">Close Me</button></div>
    <div class="separator"></div>
            <form action="{{ url_upload_handler }}" method="POST" enctype="multipart/form-data">
                
                <div>Upload GPX file:</div>
                <input id="file" type="file" name="file" value="Val"/>
                
                <!--<label for="realupload">Upload file: </label>-->

                <!--
                <div class="fakeupload">
                    <input type="text" name="fakeupload" /> #!== browse button is here as background ==#
                </div>
                <input type="file" name="file" id="realupload" class="realupload" onchange="this.form.fakeupload.value = this.value;" />
                -->
                
                <button id="submit" type="submit" name="submit">Submit</button>
            </form>
    <!--<form id="myform" action="?">-->
        <!--{% for b in all_blobs %}-->
        <!--<div class="ui-widget">-->
            <!--<input type="checkbox" id="checkbox1" class="top5" value="{{ b.key() }}">-->
            <!--<a href="/{{ url_maplayer }}/{{ b.key() }}">{{ b.filename }}</a>-->
            <!--<button onclick="location.href='/{{ url_download }}/{{ b.key() }}'" class="button-download">Download</button>-->
            <!--<button onclick="location.href='/{{ url_delete }}/{{ b.key() }}'" class="button-delete">Delete</button>-->
            <!--<button onclick="location.href='/{{ url_details }}/{{ b.key() }}'" class="button-details">Details</button>-->
        <!--</div>-->
        <!--{% endfor %}-->
    <!--</form>-->
    <div class="separator"></div>

    {% for e in entries %}
        <button onclick="$('#map').html('');$('#map').html(function() {
                init(1, {{ e.lon }}, {{ e.lat }}, 16, new Array('/gpxtrack/{{ e.bKey }}'))
            });">{{ e.bFilename }}</button>
    {% endfor %}

    <div class="ui-widget" id="format">
    {% for e in entries %}
        <!--<input type="checkbox" id="{{ e.bKey }}" /><label for="{{ e.bKey }}">{{ e.bFilename }}</label>-->
        <input type="checkbox" onclick="go({{ e.lon }}, {{ e.lat }})" class="cbox" id="{{ e.bKey }}" /><label for="{{ e.bKey }}">A</label>
    {% endfor %}
    </div>
</div>

<div class="ui-layout-center">

    <div class="ui-layout-north">
        <div id="pane4-closed">
            <button onclick="outerLayout.show('west',true)">Open #4</button>
        </div>
        <div id="pane3-buttons">
            This is pane #3 &nbsp; &nbsp;
            <button onclick="innerLayout.sizePane('north', 300)">'Open' Pane</button> &nbsp;
            <button onclick="innerLayout.sizePane('north', 50)">'Close' Pane</button>
        </div>
    </div>

    <div class="ui-layout-center">
        <!--This is pane #2-->
        <div style="width:100%; height:100%" id="map"></div>
    </div>

    <div class="ui-layout-south">
        This is pane #1 &nbsp; &nbsp;
        <button onclick="innerLayout.sizePane('south', 300)">'Open' Pane</button> &nbsp;
        <button onclick="innerLayout.sizePane('south', 50)">'Close' Pane</button>
    </div>

</div>

</body>
</html>
